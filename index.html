<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PhotoFeed v1.20.0</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glider-js@1.7.7/glider.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #121212;
            color: #FFFFFF;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }
        .logo {
            font-size: 24px;
            font-weight: bold;
        }
        .menu-button {
            background: none;
            border: none;
            color: #FFFFFF;
            font-size: 24px;
            cursor: pointer;
        }
        .category-filter {
            margin-bottom: 20px;
        }
        .feed {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }
        .photo-card {
            background-color: #1E1E1E;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        .photo-card:hover {
            transform: translateY(-5px);
        }
        .photo-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        .photo-info {
            padding: 15px;
        }
        .photo-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
        }
        .reaction-button, .comment-button, .report-button {
            background: none;
            border: none;
            color: #FFFFFF;
            cursor: pointer;
            font-size: 18px;
        }
        .like-button {
            background-color: #00C853;
            color: #FFFFFF;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .like-button:hover {
            background-color: #00E676;
        }
        footer {
            text-align: center;
            padding: 20px 0;
            margin-top: 40px;
            border-top: 1px solid #333;
        }
        footer a {
            color: #FFFFFF;
            text-decoration: none;
            margin: 0 10px;
        }
        .upload-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #00C853;
            color: #FFFFFF;
            border: none;
            padding: 15px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        @keyframes likeAnimation {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        .like-animation {
            animation: likeAnimation 0.5s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">PhotoFeed</div>
            <button class="menu-button" onclick="openMenu()">‚ò∞</button>
        </header>

        <div class="category-filter">
            <div class="glider">
                <button onclick="filterCategory('all')">Todas</button>
                <button onclick="filterCategory('nature')">üì∏ Natureza</button>
                <button onclick="filterCategory('tech')">üíª Tecnologia</button>
                <button onclick="filterCategory('art')">üé® Arte</button>
                <button onclick="filterCategory('other')">üìö Outros</button>
            </div>
        </div>

        <div class="feed" id="photo-feed"></div>

        <button class="upload-button" onclick="openUploadModal()">+</button>

        <footer>
            <a href="#" onclick="openContactModal()">Contato</a>
            <a href="#" onclick="openTermsModal()">Termos de Uso</a>
            <a href="#" onclick="openPrivacyModal()">Pol√≠tica de Privacidade</a>
        </footer>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/glider-js@1.7.7/glider.min.js"></script>

    <script>
        // Configura√ß√£o do Firebase
        const firebaseConfig = {
            // Insira aqui a configura√ß√£o do seu projeto Firebase
            apiKey: "AIzaSyD4FmKe7ei-mcKH4flhnXq9TtwmxfUeq5k",
  authDomain: "b-code-881b2.firebaseapp.com",
  databaseURL: "https://b-code-881b2-default-rtdb.firebaseio.com",
  projectId: "b-code-881b2",
  storageBucket: "b-code-881b2.firebasestorage.app",
  messagingSenderId: "199379425544",
  appId: "1:199379425544:web:2e9ac129c58ca9ee37b4bd",
  measurementId: "G-9FEKL6WX7C"
        };

        // Inicializar Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Refer√™ncia para o n√≥ 'photos' no banco de dados
        const photosRef = database.ref('photos');

        // Inicializar Glider.js para o filtro de categorias
        new Glider(document.querySelector('.glider'), {
            slidesToShow: 'auto',
            slidesToScroll: 'auto',
            draggable: true,
            arrows: {
                prev: '.glider-prev',
                next: '.glider-next'
            }
        });

        // Fun√ß√£o para abrir o modal de upload
        function openUploadModal() {
            Swal.fire({
                title: 'Enviar Foto',
                html: `
                    <input id="userName" class="swal2-input" placeholder="Seu nome (opcional)">
                    <input id="photoCategory" class="swal2-input" placeholder="Categoria">
                    <textarea id="description" class="swal2-textarea" placeholder="Descri√ß√£o da foto (opcional)"></textarea>
                    <input type="file" id="photoUpload" accept="image/*" required>
                `,
                showCancelButton: true,
                confirmButtonText: 'Enviar',
                cancelButtonText: 'Cancelar',
                preConfirm: () => {
                    const userName = document.getElementById('userName').value || 'An√¥nimo';
                    const category = document.getElementById('photoCategory').value;
                    const description = document.getElementById('description').value;
                    const file = document.getElementById('photoUpload').files[0];

                    if (!file) {
                        Swal.showValidationMessage('Por favor, selecione uma foto');
                        return false;
                    }

                    return new Promise((resolve) => {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            resolve({ userName, category, description, image: e.target.result });
                        };
                        reader.readAsDataURL(file);
                    });
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    uploadPhoto(result.value);
                }
            });
        }

        // Fun√ß√£o para fazer upload da foto
        function uploadPhoto(photoData) {
            photosRef.push({
                userName: photoData.userName,
                category: photoData.category,
                description: photoData.description,
                image: photoData.image,
                timestamp: firebase.database.ServerValue.TIMESTAMP,
                likes: 0,
                reactions: {
                    like: 0,
                    love: 0,
                    haha: 0,
                    wow: 0
                }
            });
        }

        // Fun√ß√£o para exibir fotos
        function displayPhotos(photos) {
            const feed = document.getElementById('photo-feed');
            feed.innerHTML = '';
            Object.entries(photos).forEach(([key, photo]) => {
                const photoCard = document.createElement('div');
                photoCard.className = 'photo-card';
                photoCard.innerHTML = `
                    <img src="${photo.image}" alt="Foto enviada por ${photo.userName}">
                    <div class="photo-info">
                        <h3>${photo.userName}</h3>
                        <p>${photo.description}</p>
                    </div>
                    <div class="photo-actions">
                        <button class="like-button" onclick="likePhoto('${key}')">
                            üëç <span id="likes-${key}">${photo.likes}</span>
                        </button>
                        <button class="reaction-button" onclick="showReactions('${key}')">üòÄ</button>
                        <button class="comment-button" onclick="showComments('${key}')">üí¨</button>
                        <button class="report-button" onclick="reportPhoto('${key}')">üö©</button>
                    </div>
                `;
                feed.appendChild(photoCard);
            });
        }

        // Fun√ß√£o para curtir foto
        function likePhoto(photoId) {
            const likesRef = database.ref(`photos/${photoId}/likes`);
            likesRef.transaction(function(currentLikes) {
                return (currentLikes || 0) + 1;
            });
            document.querySelector(`#likes-${photoId}`).classList.add('like-animation');
            setTimeout(() => {
                document.querySelector(`#likes-${photoId}`).classList.remove('like-animation');
            }, 500);
        }

        // Fun√ß√£o para mostrar rea√ß√µes
        function showReactions(photoId) {
            Swal.fire({
                title: 'Rea√ß√µes',
                html: `
                    <button onclick="addReaction('${photoId}', 'like')">üëç</button>
                    <button onclick="addReaction('${photoId}', 'love')">‚ù§Ô∏è</button>
                    <button onclick="addReaction('${photoId}', 'haha')">üòÇ</button>
                    <button onclick="addReaction('${photoId}', 'wow')">üòÆ</button>
                `,
                showConfirmButton: false
            });
        }

        // Fun√ß√£o para adicionar rea√ß√£o
        function addReaction(photoId, reactionType) {
            const reactionRef = database.ref(`photos/${photoId}/reactions/${reactionType}`);
            reactionRef.transaction(function(currentReactions) {
                return (currentReactions || 0) + 1;
            });
            Swal.close();
        }

        // Fun√ß√£o para mostrar coment√°rios
        function showComments(photoId) {
            const commentsRef = database.ref(`comments/${photoId}`);
            commentsRef.once('value', (snapshot) => {
                const comments = snapshot.val() || {};
                let commentsList = '';
                Object.values(comments).forEach((comment) => {
                    commentsList += `<p>${comment.text}</p>`;
                });

                Swal.fire({
                    title: 'Coment√°rios',
                    html: `
                        <div>${commentsList}</div>
                        <textarea id="newComment" class="swal2-textarea" placeholder="Adicione um coment√°rio..."></textarea>
                    `,
                    showCancelButton: true,
                    confirmButtonText: 'Enviar',
                    cancelButtonText: 'Fechar',
                    preConfirm: () => {
                        const newComment = document.getElementById('newComment').value;
                        if (newComment) {
                            commentsRef.push({
                                text: newComment,
                                timestamp: firebase.database.ServerValue.TIMESTAMP
                            });
                        }
                    }
                });
            });
        }

        // Fun√ß√£o para denunciar foto
        function reportPhoto(photoId) {
            Swal.fire({
                title: 'Denunciar Foto',
                input: 'select',
                inputOptions: {
                    'offensive': 'Conte√∫do ofensivo',
                    'copyright': 'Viola√ß√£o de direitos autorais',
                    'spam': 'Spam'
                },
                inputPlaceholder: 'Selecione o motivo',
                showCancelButton: true,
                confirmButtonText: 'Denunciar',
                cancelButtonText: 'Cancelar',
                preConfirm: (reason) => {
                    if (reason) {
                        database.ref(`reports/${photoId}`).push({
                            reason: reason,
                            timestamp: firebase.database.ServerValue.TIMESTAMP
                        });
                        return true;
                    }
                    return false;
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire('Den√∫ncia enviada', 'Obrigado por nos ajudar a manter a comunidade segura.', 'success');
                }
            });
        }

        // Fun√ß√£o para filtrar por categoria
        function filterCategory(category) {
            if (category === 'all') {
                photosRef.once('value', (snapshot) => {
                    displayPhotos(snapshot.val() || {});
                });
            } else {
                photosRef.orderByChild('category').equalTo(category).once('value', (snapshot) => {
                    displayPhotos(snapshot.val() || {});
                });
            }
        }

        // Fun√ß√£o para abrir o menu lateral
        function openMenu() {
            Swal.fire({
                title: 'Menu',
                html: `
                    <button onclick="openUploadModal()">Enviar Foto</button>
                    <button onclick="openContactModal()">Contato</button>
                    <button onclick="openTermsModal()">Termos de Uso</button>
                    <button onclick="openPrivacyModal()">Pol√≠tica de Privacidade</button>
                `,
                showConfirmButton: false
            });
        }

        // Fun√ß√µes para abrir modais de Contato, Termos e Privacidade
        function openContactModal() {
            Swal.fire('Contato', 'Entre em contato conosco pelo email: contato@photofeed.com', 'info');
        }

        function openTermsModal() {
            Swal.fire('Termos de Uso', 'Ao usar o PhotoFeed, voc√™ concorda em seguir nossas diretrizes de comunidade e respeitar os direitos autorais.', 'info');
        }

        function openPrivacyModal() {
            Swal.fire('Pol√≠tica de Privacidade', 'N√≥s respeitamos sua privacidade. Suas informa√ß√µes pessoais n√£o ser√£o compartilhadas com terceiros.', 'info');
        }

        // Carregar fotos iniciais
        photosRef.once('value', (snapshot) => {
            displayPhotos(snapshot.val() || {});
        });

        // Ouvir por mudan√ßas em tempo real
        photosRef.on('child_added', (snapshot) => {
            const newPhoto = {};
            newPhoto[snapshot.key] = snapshot.val();
            displayPhotos(newPhoto);
        });

        photosRef.on('child_changed', (snapshot) => {
            const updatedPhoto = {};
            updatedPhoto[snapshot.key] = snapshot.val();
            displayPhotos(updatedPhoto);
        });
    </script>
</body>
</html>
